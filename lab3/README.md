# Калькулятор дробей

Программа `calc.cpp` предназначена для выполнения арифметических операций с дробями и вывода подробного решения на экран. В этом файле приведено описание программы и инструкции по использованию.

## Использование

1. Скомпилируйте, а затем запустите программу.
2. Введите дробное выражение в формате `числитель/знаменатель оператор числитель/знаменатель`. Например: `1/2+3/4` или `-2/3:4/5`.
3. Нажмите Enter.
4. Если выражение корректно, программа выведет на экран подробное решение и результат операции. В противном случае программа сообщит об ошибке.
Пример работы программы:
```
Input expression: 1/2+3/4   
1/2 + 3/4 = 1*2/2*2 + 3/4 = 2/4 + 3/4 = 5/4 = 1 1/4
```
## Код

Код программы разбит на несколько файлов: `calc.cpp`, `FractNum.h`, `FractNum.cpp`, `nodNok.cpp` и `parseFractions.cpp`. 
- Файл `calc.cpp` содержит функцию `main()`, которая реализует пользовательский интерфейс и выполняет арифметические операции.
- Файл `FractNum.h` содержит определение класса `FractNum`, который представляет дробь. 
- Файл `FractNum.cpp` содержит определение методов класса `FractNum`, который представляет дробь. 
- Файл `nodNok.cpp` содержит функции поиска НОД и НОК числа, которые участвуют при выполнении некоторый арифметических операциях с дробями, а также при упрощении дроби.
- Файл `parseFractions.cpp` содержит функции для преобразования объекта дроби в строку и наоборот.


Файл `calc.cpp` состоит из двух основных блоков:

1. Блок ввода и проверки выражения:

```c++
do{
    i = 0;
    cout << "Input expression: ";
    getline(cin, s); // Ввод дробного выражения
    f_syntax = regex_search(s, r); // Сравнение с регулярным выражением
    if (f_syntax){
        n[0] = parseToFractNum(s, i); // Парсинг первого оператора
        op = s[i]; // Присвоение арифметического оператора из строки
        i++;
        n[1] = parseToFractNum(s, i); // Парсинг второго оператора
        
        cout << n[0].getFtos() << ' ' << op << ' ' << n[1].getFtos(); // Форматированный вывод дробного выражение
        if (n[0].getDen() == 0 || n[1].getDen() == 0) // Проверка на ноль в знаменателе
            cout << " - Denominator must not be ZERO. Try Again" << endl;
    }
    else cout << "Incorrect syntax. Try Again" << endl;
}while(n[0].getDen() == 0 || n[1].getDen() == 0 || !f_syntax); // Повтор ввода при некорректном выражении
```

В этом блоке программа запрашивает у пользователя ввод дробного выражения в формате "a/b + c/d", где a, b, c, d - целые числа. Выражение проверяется на соответствие регулярному выражению, и если оно корректно, то происходит его парсинг и запись значений в объекты класса FractNum. Также происходит проверка на наличие нулей в знаменателях дробей.

Блок выполнения арифметической операции и вывода результата:
```cpp
switch(op){ // Выполнение арифметического действия
    case '+': res = n[0] + n[1]; break;
    case '-': res = n[0] - n[1]; break;
    case '*': res = n[0] * n[1]; break;
    case ':': res = n[0] / n[1]; break;
}
cout << res.getDecision(); // Вывод подробного решения
```
В этом блоке программа выполняет арифметическое действие, указанное пользователем, над объектами класса FractNum, используя перегруженные операторы, и выводит результат с подробным решением.

Файл FractNum.cpp содержит определение класса FractNum, который представляет дробь в виде числителя и знаменателя, а также ряд функций для работы с ним:

Конструктор FractNum(int n=0, int d=1) - инициализирует дробь числом n/d, если d не равен 0.
int getNum() const - возвращает числитель дроби.
int getDen() const - возвращает знаменатель дроби.
string getFtos() const - возвращает строковое представление дроби в формате "a/b".
FractNum operator+(const FractNum& f2) const - перегруженный оператор сложения двух дробей.
FractNum operator-(const FractNum& f2) const - перегруженный оператор вычитания двух дробей.
FractNum operator*(const FractNum& f2) const - перегруженный оператор умножения двух дробей.
FractNum operator/(const FractNum& f2) const - перегруженный оператор деления двух дробей.
void lowterms() - упрощает дробь путем сокращения числителя и знаменателя на их наибольший общий делитель.
string getDecision() const - возвращает строку с подробным решением арифметической операции, выполненной над объектами класса FractNum.

Класс FractNum предоставляет удобный способ работы с дробными числами и позволяет выполнять над ними арифметические операции с использованием перегруженных операторов. Определение класса FractNum приведено ниже:

```c++
class FractNum{
    private:
        int num, den; // числитель и знаменатель дроби
        void lowterms(); // сокращение дроби до несократимого вида
    public:
        FractNum(int n=0, int d=1); // конструктор
        int getNum() const; // возвращает числитель дроби
        int getDen() const; // возвращает знаменатель дроби
        string getFtos() const; // возвращает строковое представление дроби
        FractNum operator+(const FractNum& f2) const; // оператор сложения
        FractNum operator-(const FractNum& f2) const; // оператор вычитания
        FractNum operator*(const FractNum& f2) const; // оператор умножения
        FractNum operator/(const FractNum& f2) const; // оператор деления
        string getDecision() const; // возвращает строку с решением арифметической операции
};
```

| Название | Описание |
|-|-|
| FractNum | Конструктор FractNum(int n=0, int d=1) инициализирует числитель и знаменатель дроби. По умолчанию создается дробь 0/1. |
| getNum() и getDen() | возвращают числитель и знаменатель дроби соответственно. |
| getFtos() | возвращает строковое представление дроби в формате "a/b". |
| Перегруженные операторы +, -, *, / | позволяют выполнять арифметические операции над объектами класса FractNum. |
| lowterms() | выполняет сокращение дроби до несократимого вида. |
| getDecision() | возвращает строку с подробным решением арифметической операции, выполненной над объектами класса FractNum. |

Файл nodNok.cpp

- int* drop(int num) - разделяет число на множители
- int nod(int a, int b) - функция нахождения наибольшего общего делителя способом
- разделения на множителя (функции drop)
- int nok(int n1, int n2, int max) - наименьшее общее кратное